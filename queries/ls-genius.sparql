PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX fx:  <http://sparql.xyz/facade-x/ns/>
PREFIX xyz: <http://sparql.xyz/facade-x/data/>
PREFIX mei: <http://www.music-encoding.org/ns/mei#>
PREFIX xml: <http://www.w3.org/XML/1998/namespace#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX afn: <http://jena.apache.org/ARQ/function#>

SELECT ?file ?localname ?filename
WHERE {
	VALUES (?location) { ("datasets/genius/iso_beatles_lyrics/" )  ("datasets/genius/iso_queen_lyrics/" ) ( "datasets/genius/jaah_lyrics/" ) ( "datasets/genius/schubert_lyrics/" ) }
	BIND ( IRI( CONCAT("x-sparql-anything:","location=", ?location ) ) AS ?fx ) .
	SERVICE ?fx {
		fx:properties fx:archive.matches ".*\\.json"
		.
		[] fx:anySlot ?file 
		#[] xyz:lyrics ?lyrics
	}
	BIND ( REPLACE(STR(?file), "^(.*)(\\/|#)([^#\\/]*)$", "$3") AS ?localname ) .
	# BIND ( afn:localname ( IRI(?file) ) AS ?localname ) .
	BIND ( REPLACE( ?localname, '\\.[^.]*$', '' ) AS ?filename )
}